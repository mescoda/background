<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>js fix ver</title>
    <link rel="stylesheet" href="../css/base.css" />
    <style>
        html {
            /*for ie67*/
            overflow: hidden;
        }
        body {
            overflow: hidden;
        }
        #bg-img {
            position: absolute;
        }
        .info {
            position: absolute;
            bottom: 0;
            right: 0;
            color: #FFF;
        }
        .info a {
            color: #FFF;
        }
    </style>
</head>
<body>
    <div id="bg">
        <img src="../imgs/bg1.jpg" alt="" id="bg-img" />
        <!-- <img src="../imgs/bg2.jpg" alt="" id="bg-img" /> -->
    </div>
    <div class="info">
        <p>IE6+ Chrome Firefox</p>
        <p>Image via: <a href="http://www.pixiv.net/member_illust.php?mode=medium&illust_id=35633440" title="">http://www.pixiv.net/member_illust.php?mode=medium&illust_id=35633440</a></p>
    </div>
    <script>
        function set() {
            var bgImg = document.getElementById('bg-img'),
                bgImgWidth = bgImg.width,
                bgImgHeight = bgImg.height,
                bgImgRatio = bgImgWidth / bgImgHeight,
                clientWidth = document.documentElement.clientWidth,
                clientHeight = document.documentElement.clientHeight;
            if(clientWidth / clientHeight > bgImgRatio) {
                // clientHeight > width
                var newHeight = clientWidth * bgImgHeight / bgImgWidth;
                bgImg.style.width = clientWidth + 'px';
                bgImg.style.height = newHeight + 'px';
                bgImg.style.left = '';
                bgImg.style.top = (clientHeight - newHeight) / 2 + 'px';
            } else {
                var newWidth = clientHeight * bgImgWidth / bgImgHeight;
                bgImg.style.width = newWidth + 'px';
                bgImg.style.height = clientHeight + 'px';
                bgImg.style.left = (clientWidth - newWidth) / 2 + 'px';
                bgImg.style.top = '';

            }
        }
        window.onload = function() {
            set();
        };
        window.onresize = function() {
            set();
        };
    </script>
</body>
</html>